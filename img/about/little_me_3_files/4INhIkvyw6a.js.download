if (self.CavalryLogger) { CavalryLogger.start_js(["Sa3Js"]); }

__d("OGAggregationBling",["cx","fbt","NumberFormat","React"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=[];this.props.likes&&a.push(b("React").createElement("span",{className:"_14a_",key:"likes"},b("React").createElement("i",{className:"_4fx"}),b("React").createElement("span",null,b("NumberFormat").formatInteger(this.props.likes)),b("React").createElement("span",{className:"accessible_elem"},h._("likes"))));if(this.props.comments)a.push(b("React").createElement("span",{className:"_14a_",key:"comments"},b("React").createElement("i",{className:"_4fy"}),b("React").createElement("span",null,b("NumberFormat").formatInteger(this.props.comments)),b("React").createElement("span",{className:"accessible_elem"},h._("comments"))));else{var c=!(this.props.mini&&this.props.likes),d=!this.props.likes&&this.props.alwaysVisible;c="_14a_"+(c?" _4fz":"")+(d?" _55n8":"");a.push(b("React").createElement("span",{className:c,key:"comments"},b("React").createElement("i",{className:"_4fy"})))}return b("React").createElement("a",{className:"_4f-",href:"#",rel:"toggle"},a)};return c}(b("React").Component);e.exports=a}),null);
__d("OGAggregationUFI",["csx","cx","CSS","DOM","OGAggregationBling","React","ReactDOM","UFICentralUpdates","UFIConstants","UFIFeedbackTargets","UFILikeLink.react","UFIReactionTypes","UFIToplevelPagedCommentList","UFIUserActions"],(function(a,b,c,d,e,f,g,h){__p&&__p();function a(a,c,d){this._root=a,this._id=c.ftentidentifier,this._source=c.source,this._mini=c.mini,this._alwaysVisible=c.alwaysvisible,this._bling=b("DOM").scry(this._root,"._4f-")[0],this._initializeLikeLink(),b("UFICentralUpdates").handleUpdate(b("UFIConstants").UFIPayloadSourceType.INITIAL_SERVER,d),b("UFICentralUpdates").subscribe("feedback-updated",function(a,b){this._id in b.updates&&this.render()}.bind(this)),this.render()}Object.assign(a.prototype,{_initializeLikeLink:function(){if(this._likeLink)throw new Error("OGAggregationUFI attempted to initialize the like link when the like link was already present");var a=b("DOM").scry(this._root,".like_link")[0];if(a){var c=document.createElement("span");a.parentNode.replaceChild(c,a);this._likeLink=c;c.appendChild(a)}},render:function(){__p&&__p();b("UFIFeedbackTargets").getFeedbackTarget(this._id,function(a){__p&&__p();if(this._likeLink){var c=!a.hasviewerliked,d=function(a){b("UFIUserActions").changeReaction(this._id,c?b("UFIReactionTypes").LIKE:b("UFIReactionTypes").NONE,{source:this._source},a.target)}.bind(this);d=b("React").createElement(b("UFILikeLink.react"),{onClick:d,likeAction:c});b("ReactDOM").render(d,this._likeLink)}if(this._bling){d=b("UFIToplevelPagedCommentList").getDisplayedCommentCountForFeedbackTargetID_UNSAFE(this._id);b("CSS").conditionClass(this._root,"_93n",this._mini&&(a.likecount||d));a=b("React").createElement(b("OGAggregationBling"),{alwaysVisible:this._alwaysVisible,mini:this._mini,likes:a.likecount,comments:d});b("ReactDOM").render(a,this._bling)}}.bind(this))}});e.exports=a}),null);
__d("OGCollectionAddCuration",["AsyncRequest","DataStore","DOM","tidyEvent"],(function(a,b,c,d,e,f){__p&&__p();var g="OGCollectionAddCuration";function a(a,c,d,e,f,h){this._container=a,this._control=c,this._itemID=d,this._surface=f,this._display=h.display,c&&b("tidyEvent")([c.subscribe("reload",this.reloadControl.bind(this))]),e&&b("DataStore").set(String(e),g,this),d&&b("DataStore").set(String(d),g,this)}Object.assign(a,{handleDeleteAction:function(a){a=b("DataStore").get(String(a),g);a&&a.reloadControl()},handleAddItemSuccess:function(a,c,d){a=b("DataStore").get(String(a),g);b("DataStore").set(String(c),g,a);a.insertMenuIntoDialog(d)},hideControl:function(a){a=b("DataStore").get(String(a),g);a.hideControl()},insertControl:function(a,c){a=b("DataStore").get(String(a),g);a.replaceControl(c)},reloadControl:function(a){a=b("DataStore").get(String(a),g);a&&a.reloadControl()}});Object.assign(a.prototype,{hideControl:function(){this._control.hide()},reloadControl:function(){var a=new(b("AsyncRequest"))("/ajax/collections/add_curation").setData({itemid:this._itemID,surface:this._surface,forceedit:!0,display:this._display}).setHandler(this._handleAddCurationResponse.bind(this));a.send()},insertMenuIntoDialog:function(a){this._control.insertMenuIntoDialog(a)},replaceControl:function(a){b("DOM").replace(this._container,a)},getMenuControl:function(){return this._control},_handleAddCurationResponse:function(a){this._control.destroy(),b("DOM").replace(this._container,a.payload)}});e.exports=a}),null);
__d("OGCollectionAddDialog",["csx","AsyncRequest","DataStore","DOMQuery","Form","MenuDeprecated","URI","collectDataAttributes","tidyEvent"],(function(a,b,c,d,e,f,g){__p&&__p();var h="OGCollectionAddDialog";function a(a,c,d,e,f){this._dialog=a,this._surface=c,this._endpoint=new(b("URI"))(e),this._loadEditMenu=f.loadEditMenu,this._listener=b("DataStore").get(String(d),h),this._audienceSelector=b("DOMQuery").find(this._dialog.getContent(),".audienceSelector"),this._menu=b("DOMQuery").find(this._dialog.getContent(),"._4-jt"),b("MenuDeprecated").register(this._menu),this._menuSubscriptionToken=b("MenuDeprecated").subscribe("select",this._onMenuClick.bind(this)),b("tidyEvent")([this._dialog.subscribe("show",this._onDialogShow.bind(this)),this._dialog.subscribe("hide",this._onDialogHide.bind(this))]),f.setContextToParent&&this._dialog.setContext(this._dialog.getContext().parentNode),this._dialog.show()}Object.assign(a,{INSTANCE_KEY:h});Object.assign(a.prototype,{_onDialogShow:function(){this._listener.onDialogShow(this._dialog)},_onDialogHide:function(){this._destroy()},_onMenuClick:function(a,c){if(c.menu!==this._menu)return;a=c.item;this._listener.onMenuClick(a);c=b("DOMQuery").find(a,"._5581");a=c.getAttribute("value");this._submitRequest(a)},_submitRequest:function(a){this._endpoint.addQueryData({collection_token:a}),this._dialog.hide(),this._request=new(b("AsyncRequest"))(this._endpoint).setData(Object.assign(b("Form").serialize(this._audienceSelector),{action:"add",load_edit_menu:this._loadEditMenu,surface:this._surface},b("collectDataAttributes")(this._dialog.getContext(),["ft"]))),this._request.send()},_destroy:function(){this._listener.onDialogHide(),b("MenuDeprecated").unsubscribe(this._menuSubscriptionToken)}});e.exports=a}),null);
__d("OGCollectionAddMenu",["csx","cx","CSS","DataStore","DOM","DOMQuery","Event","OGCollectionAddDialog","Parent","TidyArbiterMixin","tidyEvent"],(function(a,b,c,d,e,f,g,h){__p&&__p();function i(a,c,d,e,f,g){this._image=c,this._container=d,this._placeholder=e,this._surface=f,i.inform("addButton",{button:this._image,root:this._container}),b("tidyEvent")(b("Event").listen(this._container,"click",function(a){var c=b("Parent").bySelector(a.getTarget(),"._5859");this.isDialogShowing()&&c&&a.kill()}.bind(this))),this._surface==="friend_timeline_lhc"&&this._handleAlwaysVisibleLHC(),b("DataStore").set(String(a),b("OGCollectionAddDialog").INSTANCE_KEY,this)}Object.assign(i,b("TidyArbiterMixin"));Object.assign(i.prototype,b("TidyArbiterMixin"),{destroy:function(){b("DOM").remove(this._container),this._placeholder.destroy()},hide:function(){b("CSS").hide(this._image),this._placeholder.hide()},getParent:function(){return this._container.parentNode},insertMenuIntoDialog:function(a){this._placeholder.insertIntoDialog(a)},onMenuClick:function(a){this._switchToShowPlaceholder(),this.inform("menuclicked")},onDialogShow:function(a){a=b("DOMQuery").find(a.getContent(),".audienceSelector");b("CSS").addClass(this._image,"openToggler");i.inform("menuOpened",{audienceSelector:a.parentNode});this._dialogShowing=!0},onDialogHide:function(){b("CSS").removeClass(this._image,"openToggler"),this._dialogShowing=!1},isDialogShowing:function(){return this._dialogShowing},_switchToShowPlaceholder:function(){b("CSS").hide(this._image),b("CSS").show(this._placeholder.getIcon())},_handleAlwaysVisibleLHC:function(){var a=b("Parent").bySelector(this._container,"._4_ij"),c=b("Parent").bySelector(a,"._5-r");b("CSS").matchesSelector(a,"._58v0")&&b("tidyEvent")([this._alwaysVisibleToken=b("Event").listen(c,"mouseenter",function(){b("CSS").removeClass(a,"_58v0"),this._alwaysVisibleToken.remove()}.bind(this))])}});e.exports=i}),null);
__d("OGCollectionAddedIconPlaceholder",["csx","CSS","DataStore","DOM","DOMQuery","Event","tidyEvent"],(function(a,b,c,d,e,f,g){__p&&__p();var h="OGCollectionAddedIconPlaceholder";function a(a,c,d,e){this._dialog=d,this._icon=c,this._addPlaceholder=e,b("tidyEvent")(b("Event").listen(c,"click",d.show.bind(d))),b("DataStore").set(String(a),h,this)}Object.assign(a,{loadEditMenu:function(a,c){a=b("DataStore").get(String(a),h);a.insertIntoDialog(c)}});Object.assign(a.prototype,{destroy:function(){this._dialog.destroy()},getIcon:function(){return this._icon},hide:function(){b("CSS").hide(this._icon),b("CSS").show(this._addPlaceholder),this._dialog.hide()},insertIntoDialog:function(a){b("DOM").setContent(b("DOMQuery").find(this._dialog.getContent(),"._51rr"),a)}});e.exports=a}),null);