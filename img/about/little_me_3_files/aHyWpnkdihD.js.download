if (self.CavalryLogger) { CavalryLogger.start_js(["zDSbV"]); }

__d("StickerConstants",[],(function(a,b,c,d,e,f){e.exports={MOBILE_LIKE_STICKER_PACK_ID:"227877430692340",GRAVEYARD_PACK_ID:"604597256247273",LIKE_STICKER_ID:"227878347358915",HOT_LIKE_SMALL_STICKER_ID:"369239263222822",HOT_LIKE_MEDIUM_STICKER_ID:"369239343222814",HOT_LIKE_LARGE_STICKER_ID:"369239383222810",MRU_STICKER_PACK:"599061016853145",SEARCH_PACK_ID:"680229632032514",FEED_PACK_ID:"2239834712900285",OZ_PACK_ID:"1456625217993235",AVATARS_PACK_ID:"2191329907595522",TRENDING_STICKER_PACK_ID:"924487421216423",SPRITE_PADDING:"24",PayloadSource:{VIEW_ACTION:"view-action"},DEFAULT_FRAME_RATE:83,TRAY_SIZE:64,THREAD_SIZE:120}}),null);
__d("FBRTCConfig",["CurrentUser"],(function(a,b,c,d,e,f){__p&&__p();var g=!1,h=null,i=null,j=0,k={};a={setConfig:function(a){var b=a.isVCEndpointCall,c=a.meetingID,d=a.meetingPassword,e=a.peerID;a=a.serverConfig;g=b;h=c;i=d;j=e;k=a},isVCEndpointCall:function(){return g},getMeetingID:function(){return h},getMeetingPassword:function(){return i},getPeerID:function(){return j},statsInterpreterConfig:function(){return{bad_score_count:3,frr_weight:800,plr_weight:500,rtt_weight:2,score_threshold:1e3}},unsupportedBrowserUrl:function(){if(k.troubleshooting_urls&&k.troubleshooting_urls.unsupported_browser)return k.troubleshooting_urls.unsupported_browser;if(b("CurrentUser").isWorkUser())return"https://www.facebook.com/help/work/919532078125908";else return"https://www.facebook.com/help/211644178877843"},userMediaErrorUrl:function(){if(k.troubleshooting_urls&&k.troubleshooting_urls.user_media_error)return k.troubleshooting_urls.user_media_error;if(b("CurrentUser").isWorkUser())return"https://www.facebook.com/help/work/180714775754632";else return"https://www.facebook.com/help/232232800134371"},userMediaPermissionErrorUrl:function(){if(k.troubleshooting_urls&&k.troubleshooting_urls.user_media_permission_error)return k.troubleshooting_urls.user_media_permission_error;if(b("CurrentUser").isWorkUser())return"https://www.facebook.com/help/work/180714775754632";else return"https://www.facebook.com/help/232232800134371"},isMessengerDotCom:function(){return k.is_messenger_dot_com},useMessengerCallUI:function(){return k.messenger_call_ui},useHDVideoQuality:function(){return k.use_hd_video_quality},shouldCreateDataChannel:function(){return k.data_channel},disableURLManager:function(){return k.disable_url_manager}};e.exports=a}),null);
__d("RTWebExperiments",["FBRTCConfig","qex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={enableCallCollisionFix:function(){return b("FBRTCConfig").isVCEndpointCall()?!1:b("qex")._("771668")},passOfferWithWindowMessages:function(){return b("FBRTCConfig").isVCEndpointCall()?!1:b("qex")._("771669")},forceSmallWindow:function(a,c){return a||c?!1:b("qex")._("722012")},fixedHeightGridView:function(a,c){return a||c?!1:b("qex")._("779395")},fixedHeightGridViewOuterWindowHeight:function(){return b("qex")._("779396")},fixedHeightGridViewOuterWindowWidth:function(){return b("qex")._("779397")},fixedHeightGridViewGridHeightPercent:function(){return b("qex")._("781541")}};e.exports=a}),null);
__d("FBRTCLocalMessageQueue",["CacheStorage","FBRTCConstants","RTWebExperiments"],(function(a,b,c,d,e,f){__p&&__p();var g="localstorage",h="RTC_",i="offer",j="offer_msg",k="data_",l=30*1e3,m=new Map(),n={STORAGE_TYPE:g,PREFIX:h,OFFER_KEY:i,OFFER_SUFFIX:j,DATA_KEY_PREFIX:k,CACHE_LIFE:l,clearQueue:function(a){m.set(a,new Map())},writePeerOfferToStorage:function(a,b){a=n.getStorage(a,j);n._storeData(a,i,b)},getPeerOfferFromStorage:function(a){a=n.getStorage(a,j);return n._getData(a,i)},clearPeerOfferFromStorage:function(a){a=n.getStorage(a,j);a.remove(i)},pluckOffer:function(a){if(b("RTWebExperiments").passOfferWithWindowMessages()){var c=m.get(a)||new Map(),d=c.get(i);c["delete"](i);return d||null}else{c=n.getPeerOfferFromStorage(a);n.clearPeerOfferFromStorage(a);return c||null}},enqueueMessage:function(a,c,d){c=k+c.toString();var e=m.get(a)||new Map();d.msg_type===b("FBRTCConstants").PayloadType.OFFER&&(c=i);e.set(c,d);m.set(a,e)},drainQueue:function(a,b){__p&&__p();var c=m.get(a)||new Map();for(var c=c,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;f[0];f=f[1];b(f)}m.set(a,new Map())},_storeData:function(a,b,c){c={__t:Date.now(),__d:c};a.set(b,c)},_getData:function(a,b){var c=a.get(b);if(c&&n._isValid(c))return c.__d;else c&&a.remove(b);return null},_getAndRemoveData:function(a,b){var c=n._getData(a,b);if(c!==null){a.remove(b);return c}return null},_isValid:function(a){return Date.now()-a.__t<l},getStorage:function(a,c){return new(b("CacheStorage"))(g,""+h+a+"_"+c+"_")}};e.exports=n}),null);
__d("FBRTCMessageListener",["invariant","Arbiter","Bootloader","ChannelConstants","FBRTCConstants","FBRTCExperiment","FBRTCLocalMessageQueue","FBRTCSupport","MqttWebInstrumentationConfig","RTWebExperiments","guid","mixInEventEmitter","qex"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBRTCConstants").ChildWindowMessageType,i=45*1e3,j=[],k=null,l=null,m,n=null,o=null,p=!1,q=!1,r=null,s=null,t=null,u=null,v=b("MqttWebInstrumentationConfig").mqttCpTimeBuffer||2e3,w=null,x=null,y=null;a={logCheckpoint:function(a){b("Bootloader").loadModules(["RTWebUserActionLogger"],function(b){b.logCheckpoint({checkpoint:a})},"FBRTCMessageListener")},logDelayed:function(a,b){a="MQTT_"+(a?"YES":"NO")+"_CP_"+(b?"YES":"NO");this.logCheckpoint(a)},clearMQTTLogState:function(){w=null,x=null,y=null},logMessageReceived:function(a,b){var c=this;if(a&&w||!a&&x)return;else a?w=b:x=b;x&&w&&y?(window.clearTimeout(y),y=null):y||(y=window.setTimeout(function(){c.logDelayed(w,x)},v))},init:function(a,c){__p&&__p();var d,e=this;if(p)return;p=!0;q=a;r=c;b("Bootloader").loadModules(["FBMqttChannel"],function(a){a.subscribe("/webrtc",function(a){e.logMessageReceived(!0,a);a=JSON.parse(a);e._onMessage(a)}),b("FBRTCExperiment").getMWSignalingExperiment().getBool("use_mqtt_for_mw",!1,!1)&&a.subscribe("/rtc_multi",function(a){b("FBRTCExperiment").getMWSignalingExperiment().logExposure();a=JSON.parse(a);e._onMultiwayMessage(a)})},"FBRTCMessageListener");((d=b("qex")._("928263"))!=null?d:!0)&&(b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("webrtc"),function(a,b){e.logMessageReceived(!1,JSON.stringify(b.obj)),e._onMessage(b.obj)}),b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("webrtc_offer"),function(a,b){e._onMessage(b.obj)}),b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("webrtc_offerack"),function(a,b){e._onMessage(b.obj)}));b("FBRTCExperiment").getMWSignalingExperiment().getBool("use_mqtt_for_mw",!1,!1)||b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("rtc_multi_json"),function(a,c){b("FBRTCExperiment").getMWSignalingExperiment().logExposure(),e._onMultiwayMessage(c.obj)});b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("onevc"),function(a,b){e._onOneVCMessage(b.obj)});if(b("FBRTCSupport").isWebrtcSupported()&&window.addEventListener){d=a?this._handleWindowMessageToChild.bind(this):this._handleWindowMessageToParent.bind(this);window.addEventListener("message",d,!1)}a&&this._connectToParentWindow(c)},setParentWindowNonce:function(a){n=a},generateNewNonce:function(){o=b("guid")();return o},setMultiwayMessageHandler:function(a){s&&g(0,1011),s=a},_emit:function(a,b){this.emit(a,b)},_onMultiwayMessage:function(a){this._emit("multiwayMessageReceived",a),s&&s(a)},setOneVCMessegeHandler:function(a){t==null&&(t=a)},_onOneVCMessage:function(a){t!=null&&t(a)},setMessageHandler:function(a){k&&g(0,1013);k=a;while(j.length)k(j.shift())},removeMessageHandler:function(){k=null},removeOneVCMessageHandler:function(){t=null},setParentWindowStartCallHandler:function(a){u=a},_onMessage:function(a){a.from&&(a.from=a.from.toString()),this._emit("messageReceived",a),k?k(a):j.push(a),q||this._passOrQueueToChildWindow(a)},_connectToParentWindow:function(a){if(window.opener&&window.opener.postMessage){a={type:h.CHILD_WINDOW_READY,nonce:n,childNonce:this.generateNewNonce(),peerID:a};window.opener.postMessage(a,window.location.origin)}},_verifyWindowMessage:function(a){return Boolean(a.origin===window.location.origin&&a.data&&o!==null&&a.data.nonce===o)},_handleWindowMessageToParent:function(a){__p&&__p();if(!this._verifyWindowMessage(a))return;if(a.data.type===h.CHILD_WINDOW_READY){var b=a.data,c=b.childNonce;b=b.peerID;this.setParentWindowNonce(c);this._setChildWindow(a.source);this._startCallInChildWindow(b);this.generateNewNonce();this._replayQueuedMessagesToChild(b,l)}},_handleWindowMessageToChild:function(a){if(!this._verifyWindowMessage(a))return;a.data.type===h.CHILD_WINDOW_MESSAGE&&this._onMessage(a.data.message);if(a.data.type===h.CHILD_WINDOW_START_CALL&&u){a=a.data.offer;!a&&r&&(a=b("FBRTCLocalMessageQueue").getPeerOfferFromStorage(r),a&&b("RTWebExperiments").passOfferWithWindowMessages()&&this.logCheckpoint("got_offer_from_storage_while_in_experiment"));u(a)}},_replayQueuedMessagesToChild:function(a,c){var d=this;b("FBRTCLocalMessageQueue").drainQueue(a,function(a){d._postToChildWindowMessage(c,a)})},_setChildWindow:function(a){l=a,window.clearTimeout(m),m=window.setTimeout(function(){l=null},i)},_postToChildWindowMessage:function(a,b){b={type:h.CHILD_WINDOW_MESSAGE,nonce:n,message:b};a.postMessage(b,window.location.origin)},_passOrQueueToChildWindow:function(a){l&&this._postToChildWindowMessage(l,a),b("RTWebExperiments").enableCallCollisionFix()&&b("FBRTCLocalMessageQueue").enqueueMessage(a.from,a.id,a)},_startCallInChildWindow:function(a){if(l){a={type:h.CHILD_WINDOW_START_CALL,nonce:n,offer:b("RTWebExperiments").passOfferWithWindowMessages()?b("FBRTCLocalMessageQueue").pluckOffer(a):null};l.postMessage(a,window.location.origin)}},listenOnce:function(a,b){this.once(a,b)}};b("mixInEventEmitter")(a,{messageReceived:!0,multiwayMessageReceived:!0});e.exports=a}),null);
__d("FantaMessageActions",["Bootloader","CurrentUser","FantaDispatcher","MercuryIDs","MercuryLocalIDs","MercuryViewer","MessengerState.bs","emptyFunction","ifRequired","keyMirror","requireWeak","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b("requireWeak")("FantaAppStore",function(a){return g=a});var h=b("keyMirror")({ADD_GROUP_PARTICIPANTS:null,ADD_GROUP_PARTICIPANTS_AS_OPEN_TAB:null,ADD_GROUP_PARTICIPANTS_AS_REPLACE_TAB:null,CANCEL_FILE_UPLOAD:null,CANCEL_REPLY_TO_MESSAGE:null,COMPOSER_TEXT_UPDATE:null,LINK_PREVIEW:null,LOADED_SHARE_DATA:null,LOADING_SHARE_DATA:null,PREPARE_FILES_FOR_SEND:null,RECEIVED_NEW_MESSAGE:null,REMOVE_SHARE_PREVIEW:null,REPLY_TO_MESSAGE:null,SEND_GIF:null,SEND_HOT_LIKE:null,SEND_MESSAGE:null,SEND_PHOTO:null,SEND_STICKER:null,SET_NEW_GROUP_NAME_LOCALLY:null,UPDATE_GROUP_NAME:null,UPDATE_USER_INPUT_REQUESTED:null});function i(a){__p&&__p();var c=b("MercuryViewer").getID();if(!a.length)return null;a=a.filter(function(a){return a!==c});var d;if(a.length===0)return null;else a.length===1?d=b("MercuryIDs").getThreadIDFromParticipantID(a[0]):(d=b("MercuryLocalIDs").generateThreadID(),a.unshift(c),b("MessengerState.bs").createNewLocalThread(b("CurrentUser").getID(),d,a));return d}a={Types:h,prepareFilesForSend:function(a,c,d,e){var f={type:h.PREPARE_FILES_FOR_SEND,tabID:a,files:c,composer:d};this.dispatchOrBootloadUploader(function(){b("FantaDispatcher").dispatch(f),e&&e()})},replyToMessage:function(a,c){b("FantaDispatcher").dispatch({type:h.REPLY_TO_MESSAGE,threadID:c,message:a})},cancelReplyToMessage:function(a){b("FantaDispatcher").dispatch({type:h.CANCEL_REPLY_TO_MESSAGE,threadID:a})},cancelFileUpload:function(a,c){var d={type:h.CANCEL_FILE_UPLOAD,tabID:a,uploadID:c};this.dispatchOrBootloadUploader(function(){b("FantaDispatcher").dispatch(d)})},linkPreview:function(a,c){this.dispatchOrBootloadSharePreview(function(){b("FantaDispatcher").dispatch({type:h.LINK_PREVIEW,tabID:a,uri:c})})},loadedShareData:function(a,c,d){this.dispatchOrBootloadSharePreview(function(){b("FantaDispatcher").dispatch({type:h.LOADED_SHARE_DATA,tabID:a,attachmentData:c,composer:d})})},loadingShareData:function(a,c){this.dispatchOrBootloadSharePreview(function(){b("FantaDispatcher").dispatch({type:h.LOADING_SHARE_DATA,composer:c,tabID:a})})},removeSharePreview:function(a,c){this.dispatchOrBootloadSharePreview(function(){b("FantaDispatcher").dispatch({type:h.REMOVE_SHARE_PREVIEW,tabID:a,composer:c})})},receivedNewMessage:function(a,c){b("FantaDispatcher").dispatch({type:h.RECEIVED_NEW_MESSAGE,tabID:a,message:c})},updateGroupName:function(a,c){this.dispatchOrBootloadSendMessages(function(){b("FantaDispatcher").dispatch({type:h.UPDATE_GROUP_NAME,threadID:a,newName:c})})},setNewGroupNameLocally:function(a,c){this.dispatchOrBootloadSendMessages(function(){b("FantaDispatcher").dispatch({type:h.SET_NEW_GROUP_NAME_LOCALLY,threadID:a,newName:c})})},addParticipants:function(a,c){__p&&__p();var d=this;b("ifRequired")("FantaAppStore",function(e){__p&&__p();e=e.getState().mercury.tabContents.get(a);if(!e)return;var f=e.thread;e=e.typeahead;if(!e||!f)return;var h=b("MessengerState.bs").isEmptyLocalThread(b("CurrentUser").getID(),a);if(f.is_canonical_user||h){h=e.getSelectedParticipantIDs();e=f.participants;e=i(e.concat(h));e?f.is_canonical_user?d.addGroupParticipantsAsOpenTab(e,a,c):d.addGroupParticipantsAsReplaceTab(e,a,c):d.addGroupParticipant(a,c)}else d.addGroupParticipant(a,c)})},addGroupParticipant:function(a,c){this.dispatchOrBootloadSendMessages(function(){b("FantaDispatcher").dispatch({type:h.ADD_GROUP_PARTICIPANTS,threadID:a,onSendSuccess:c})})},addGroupParticipantsAsOpenTab:function(a,c,d){this.dispatchOrBootloadSendMessages(function(){b("FantaDispatcher").dispatch({type:h.ADD_GROUP_PARTICIPANTS_AS_OPEN_TAB,fromTabID:c,onSendSuccess:d,tabID:a})})},addGroupParticipantsAsReplaceTab:function(a,c,d){this.dispatchOrBootloadSendMessages(function(){b("FantaDispatcher").dispatch({type:h.ADD_GROUP_PARTICIPANTS_AS_REPLACE_TAB,newTabID:a,onSendSuccess:d,tabID:c})})},sendMessage:function(a,c,d,e){this.dispatchOrBootloadSendMessages(function(){var f={type:h.SEND_MESSAGE,threadID:a,message:c,composer:d,onSendSuccess:e};b("FantaDispatcher").dispatch(f)})},sendPhoto:function(a,c,d){this.dispatchOrBootloadSendMessages(function(){var e={type:h.SEND_PHOTO,clearComposerOnSend:!0,onSendSuccess:d,photoData:c,threadID:a};b("FantaDispatcher").dispatch(e)})},sendGif:function(a,c,d){this.dispatchOrBootloadSendMessages(function(){var e={type:h.SEND_GIF,clearComposerOnSend:!1,onSendSuccess:d,photoData:c,threadID:a};b("FantaDispatcher").dispatch(e)})},sendHotLike:function(a,c,d,e,f){this.dispatchOrBootloadSendMessages(function(){var g={type:h.SEND_HOT_LIKE,emoji:c,onSendSuccess:f,size:d,source:e,threadID:a};b("FantaDispatcher").dispatch(g)})},sendSticker:function(a,c,d){this.dispatchOrBootloadSendMessages(function(){var e={type:h.SEND_STICKER,threadID:a,stickerID:c,onSendSuccess:d};b("FantaDispatcher").dispatch(e)})},composerTextUpdate:function(a,c,d){var e=this;c.length>0&&b("ifRequired")("FantaReducersSendMessages",b("emptyFunction"),function(){return e.dispatchOrBootloadSendMessages(b("emptyFunction"))});this.dispatchOrBootloadSharePreview(function(){b("FantaDispatcher").dispatch({type:h.COMPOSER_TEXT_UPDATE,composer:d,message:c,threadID:a})})},dispatchOrBootloadMessages:function(a){b("ifRequired")("FantaReducersMessages",function(){b("setImmediate")(a)},function(){b("Bootloader").loadModules(["FantaReducersMessages"],function(c){g&&(g.addReducers(c),b("setImmediate")(a))},"FantaMessageActions")})},dispatchOrBootloadSendMessages:function(a){b("ifRequired")("FantaReducersSendMessages",function(){b("setImmediate")(a)},function(){b("Bootloader").loadModules(["FantaReducersSendMessages"],function(c){g&&(g.addReducers(c),b("setImmediate")(a))},"FantaMessageActions")})},dispatchOrBootloadUploader:function(a){b("ifRequired")("FantaReducersFileUploader",function(){a()},function(){b("Bootloader").loadModules(["FantaReducersFileUploader"],function(b){g&&(g.addReducers(b),a())},"FantaMessageActions")})},dispatchOrBootloadSharePreview:function(a){b("ifRequired")("FantaReducersSharePreview",function(){a()},function(){b("Bootloader").loadModules(["FantaReducersSharePreview"],function(b){g&&(g.addReducers(b),a())},"FantaMessageActions")})},updateUserInputRequested:function(a,c,d){this.dispatchOrBootloadMessages(function(){b("FantaDispatcher").dispatch({type:h.UPDATE_USER_INPUT_REQUESTED,isUserInputRequested:a,requestNumResults:c,requestType:d})})}};e.exports=a}),null);
__d("FantaTypeFileUploader",["immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=Object.freeze({ANIMATED_IMAGE:"animated_image",AUDIO:"audio",FILE:"file",GENERIC_ATTACHMENT:"generic_attachment",IMAGE:"image",VIDEO:"video"});c={uploadedFiles:b("immutable").Map(),uploadingFiles:b("immutable").Map()};d=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.getTypeIDs=function(a){return this.uploadedFiles.reduce(function(b,c){c.type===a&&c.uploadedID&&(b=b.concat(c.uploadedID));return b},[])};return b}(b("immutable").Record(c));d.fileTypes=a;e.exports=d}),null);
__d("TimeSpentRoomTypeEnum",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({GROUP:"GROUP",EVENT:"EVENT"})}),null);
__d("MessageThreadAssociatedObjectUtils",["TimeSpentRoomTypeEnum"],(function(a,b,c,d,e,f){"use strict";a={shouldRender:function(a){return a&&a.room_type===b("TimeSpentRoomTypeEnum").GROUP&&!a.is_workplace_community},isLinkedToGroupChat:function(a){return a&&a.room_type===b("TimeSpentRoomTypeEnum").GROUP&&!a.is_workplace_community}};e.exports=a}),null);
__d("MessengerParticipantAddModeTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ADD:"ADD",INVITE:"INVITE",ADD_INVITE:"ADD_INVITE"})}),null);
__d("MessengerAdminGroupUtils",["fbt","CurrentUser","MercuryConfig","MercuryIDs","MessageRequestUtils","MessageThreadAssociatedObjectUtils","MessagingSourceEnum","MessengerApprovalModeTypes","MessengerGroupAdminModelStatus","MessengerGroupAdminType","MessengerJoinableModeType","MessengerParticipantAddModeTypes","QE2Logger","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="messenger_use_new_group_participant_suggestion_ranking",i="show_nullstate_chat_tab_group_chat",j={isJoinableAndOpenThread:function(a){return this.isJoinableThread(a)&&this.isApprovalOpenThread(a)},isJoinableAndApprovalRequiredThread:function(a){return!!(this.isJoinableThread(a)&&a&&a.approval_mode===b("MessengerApprovalModeTypes").APPROVALS)},isWorkSyncedGroupChat:function(a){return!!(a==null?void 0:a.work_associated_group)},isWorkFroup:function(a){return!!(b("gkx")("678597")&&a&&a.is_thread_queue_enabled===!0&&a.joinable_mode&&a.joinable_mode.mode===b("MessengerJoinableModeType").JOINABLE&&b("MessageThreadAssociatedObjectUtils").isLinkedToGroupChat(a.associated_object))},isWorkSyncedChatThreadCreationMessage:function(a){return!!(a.log_message_data&&a.log_message_data.name&&a.tags&&(a.tags.indexOf(b("MessagingSourceEnum").WORK_GROUP_SYNCED_CHAT_CREATION)!==-1||a.tags.indexOf(b("MessagingSourceEnum").WORK_DEFAULT_GROUP_SYNCED_CHAT_CREATION)!==-1))},isWorkSyncedChatThreadMemberSyncMessage:function(a){return!!(a.tags&&a.tags.indexOf(b("MessagingSourceEnum").WORK_GROUP_SYNCED_CHAT_MEMBER_SYNC)!==-1)},shouldAddToApprovalQueue:function(a,b){return!!(this.isJoinableAndApprovalRequiredThread(a)&&a&&!j.isAdmin(a.admins,b))},isJoinableThread:function(a){return!!(b("gkx")("678598")&&a&&a.is_thread_queue_enabled===!0&&a.joinable_mode&&a.joinable_mode.mode===b("MessengerJoinableModeType").JOINABLE)},isGroupChat:function(a){return!!(a&&b("MessageThreadAssociatedObjectUtils").isLinkedToGroupChat(a.associated_object))},shouldInvite:function(a){return!!(b("gkx")("678598")&&a&&a.participant_add_mode===b("MessengerParticipantAddModeTypes").INVITE)},isApprovalOpenThread:function(a){return!!((b("CurrentUser").isWorkUser()||b("gkx")("678598"))&&a&&a.approval_mode===b("MessengerApprovalModeTypes").OPEN)},isAdminRequired:function(a){return!!(a&&a.admin_model_status===b("MessengerGroupAdminModelStatus").REQUIRED)},isOwner:function(a,b){return a&&(this.isJoinableThread(b)||this.isAdminRequired(b))},canSeeJoinableGroupOptions:function(a,c){var d=b("CurrentUser").isWorkUser(),e=j.showJoinableApprovalToggle(a,c);c=j.showApprovalQueue(a,c);return!d&&this.isJoinableThread(a)&&(c||e)},canSeeGroupOptionsSection:function(a,c){c=this.isAdmin(a.admins,c);var d=b("MessageRequestUtils").isMessageRequest(a);return c&&this.isAdminRequired(a)&&!d},canSeeBotsInGroupTypeahead:function(){return b("CurrentUser").isWorkUser()},canMakeOthersAdmins:function(a,b,c){return this.isOwner(a,c)&&!b},canMakeSelfAdmin:function(a,b){return(this.isJoinableThread(b)||this.isAdminRequired(b))&&Object.keys(b.admins).length===0&&a},canRemoveAdmin:function(a,c,d,e){if(this.isAdminRequired(e)&&Object.keys(e.admins).length===1)return!1;switch(d){case b("MessengerGroupAdminType").CHAT_SUPER_ADMIN:return!1;default:return this.isOwner(a,e)&&c}},canRemoveFromGroup:function(a,c,d){switch(c){case b("MessengerGroupAdminType").CHAT_SUPER_ADMIN:return!1;default:return this.isAdminRequired(d)||this.isWorkFroup(d)?a:this.isOwner(a,d)||!this.isJoinableThread(d)}},showJoinableApprovalToggle:function(a,b){if(a.associated_object&&!a.associated_object.approval_mode_toggleable)return!1;b=j.isAdmin(a.admins,b);return j.isOwner(b,a)},showApprovalQueue:function(a,b){b=j.isAdmin(a.admins,b);b=j.isOwner(b,a);var c=this.getPendingRequestNumber(a);if(a&&this.isAdminRequired(a))return this.isAdminRequired(a)&&b&&c>0;else{a=j.isJoinableAndApprovalRequiredThread(a);return a&&b&&c>0}},showParticipantsModal:function(a,b,c){return this.isJoinableThread(c)&&!a&&!b},useNewGroupMemberSuggestionRanking:function(){b("QE2Logger").logExposureForUser(h);return b("MercuryConfig").MNGPS},showDefaultListForNewPersonAddChatTab:function(){b("QE2Logger").logExposureForUser(i);return b("MercuryConfig").ChatGroupChat},showDefaultListForNewChatTab:function(){return b("MercuryConfig").ChatComposer},canUpdateThreadCustomization:function(a,c){var d=j.isJoinableThread(a);c=j.isAdmin(a.admins,c);var e=b("MessageRequestUtils").isMessageRequest(a);return a.is_subscribed&&!e&&(!d||c)},canUpdateThreadDescription:function(a,c){var d=j.isJoinableThread(a);c=j.isAdmin(a.admins,c);var e=j.isWorkSyncedGroupChat(a);if(e)return c;e=b("MessageRequestUtils").isMessageRequest(a);return a.is_subscribed&&!e&&(!d||c)},isAdmin:function(a,c){if(!a)return!1;if(b("MercuryIDs").isValid(c)){var d=b("MercuryIDs").getUserIDFromParticipantID(c);return!!d&&a[d]!==void 0}return a[c]!==void 0},getLeaveGroupBodyText:function(a,b){a=this.isOwner(a,b);var c=j.isWorkSyncedGroupChat(b);return!c?a?g._("Leaving this group will remove you as an owner and allow other members to manage the group. You will no longer be able to send or receive new messages."):g._("You will stop receiving messages from this conversation and people will see that you left."):a?b.participants.length===1?g._("Are you sure you want to leave this group? As you're the last member, leaving now will also delete this group."):g._("Leaving this group will remove you as an owner and allow other members to manage the chat thread. You will no longer be able to send or receive new messages. You will also be removed from the group."):g._("You will stop receiving messages from this conversation and people will see that you left. You will also be removed from the group.")},getLeaveGroupTitleText:function(a,b){return j.isWorkSyncedGroupChat(b)?b.participants.length===1?g._("Delete Group and Chat?"):g._("Leave Group and Chat?"):this.isOwner(a,b)?g._("Leave this conversation?"):g._("Leave Conversation?")},getLeaveGroupButtonText:function(a,b){return this.isOwner(a,b)?b.participants.length===1?g._("Leave and delete"):g._("Leave conversation"):g._("Leave")},getMakeOwnerBodyText:function(a,b,c){if(a)return b?g._("As a group admin, you will be able to manage who can join and customize this conversation."):g._("As a group admin, \"{owner's name}\" will be able to manage who can join and customize this conversation.",[g._param("owner's name",c)]);else return b?g._("As a group owner, you will be able to manage group ownership and remove members from the conversation. Only owners will be able to add other owners."):g._("As a group owner, \"{owner's name}\" will be able to manage group ownership and remove members from the conversation. They will be able to remove ownership from other owners.",[g._param("owner's name",c)])},getMakeOwnerTitleText:function(a,b){if(a)return b?g._("Become group admin?"):g._("Add group admin?");else return b?g._("Become group owner?"):g._("Add group owner?")},getMakeOwnerButtonText:function(a,b){if(a)return b?g._("Become admin"):g._("Make admin");else return b?g._("Become owner"):g._("Make owner")},getRemoveOwnerBodyText:function(a,b,c,d){if(b&&c)return a?null:g._("You will no longer manage group ownership and remove members from this conversation. You will still be a participant in the group. Any other member will be able to own the group.");else if(b&&!c)return a?g._("You will no longer be able to manage who can join and customize this conversation."):g._("You will no longer manage group ownership and remove members from this conversation. You will still be a participant in the group.");else return a?g._("\"{owner's name}\" will no longer be able to manage who can join and customize this conversation.",[g._param("owner's name",d)]):g._("\"{owner's name}\" will no longer manage group ownership and remove members from the conversation. They will still be a participant in the group.",[g._param("owner's name",d)])},getRemoveOwnerTitleText:function(a){return a?g._("Remove as group admin?"):g._("Remove as group owner?")},getRemoveOwnerButtonText:function(a){return a?g._("Remove"):g._("Remove owner")},getPendingRequestNumber:function(a){if(a&&a.approval_queue_ids&&a.approval_queue_ids.length)return a.approval_queue_ids.length;else if(a&&this.isAdminRequired(a)&&a.group_approval_queue&&a.group_approval_queue.length)return a.group_approval_queue.length;return 0}};e.exports=j}),null);
__d("MercuryIgnoredBlockedParticipants.bs",["bs_belt_Set","bs_caml_obj","MercuryIDs","CurrentUser","bs_js_primitive","ParticipantId.bs","WorkForeignEntityInfo.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){return b("bs_belt_Set").fromArray(a,[b("ParticipantId.bs").cmp])}function g(a,c,d){d=d.participants.filter(function(c){return c!==b("MercuryIDs").getParticipantIDFromUserID(a)});return d.filter(function(a){return b("bs_belt_Set").has(c,a)!==!1})}function c(a,b,c){if(c.is_canonical)return!1;else return g(a,b,c).length>0}function d(a,b,c){if(c.is_canonical)return[];else return g(a,b,c)}function e(a,c,d){var e=d.is_canonical;if(e){e=d.participants.filter(function(c){return b("bs_caml_obj").caml_notequal(c,b("MercuryIDs").getParticipantIDFromUserID(a))});return!e.every(function(a){return!b("bs_belt_Set").has(c,a)})}else return!1}var h=b("bs_belt_Set").has;function i(a,c,d){if(!a.is_canonical_user||b("bs_js_primitive").nullable_to_opt(a.other_user_fbid)===b("bs_js_primitive").some(c))return!1;else if(!b("CurrentUser").isWorkUser()||d==null)return!0;else if(d==null)return!1;else return!b("WorkForeignEntityInfo.bs").isCoworker(d)}f.fromIds=a;f.findIntersection=g;f.isPresentInGroupThread=c;f.participantsInGroupThread=d;f.qualifiesAs=e;f.isInSet=h;f.shouldShowBlock=i}),null);
__d("MessengerDotComAndInboxM4Check.bs",["gkx","CurrentUser","MessengerEnvironment"],(function(a,b,c,d,e,f){"use strict";a=b("gkx")("686397")&&!b("CurrentUser").isWorkUser()&&b("MessengerEnvironment").messengerui;f.yes=a}),null);
__d("HotLikeSound",["MercurySoundsConfig","SoundPlayer","StickerConstants"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[b("MercurySoundsConfig").hot_like_grow_mp3_url,b("MercurySoundsConfig").hot_like_grow_ogg_url],h=[b("MercurySoundsConfig").hot_like_pop_mp3_url,b("MercurySoundsConfig").hot_like_pop_ogg_url],i=[b("MercurySoundsConfig").hot_like_outgoing_small_mp3_url,b("MercurySoundsConfig").hot_like_outgoing_small_ogg_url],j=[b("MercurySoundsConfig").hot_like_outgoing_medium_mp3_url,b("MercurySoundsConfig").hot_like_outgoing_medium_ogg_url],k=[b("MercurySoundsConfig").hot_like_outgoing_large_mp3_url,b("MercurySoundsConfig").hot_like_outgoing_large_ogg_url],l=function(){return!1};a={setCheckSoundEnabledFunc:function(a){l=a},start:function(){this._play(g)},stop:function(){b("SoundPlayer").stop(g)},pop:function(){this.stop(),this._play(h)},snap:function(a){this.stop(),a===b("StickerConstants").HOT_LIKE_SMALL_STICKER_ID&&this._play(i),a===b("StickerConstants").HOT_LIKE_MEDIUM_STICKER_ID&&this._play(j),a===b("StickerConstants").HOT_LIKE_LARGE_STICKER_ID&&this._play(k)},_play:function(a){l()&&b("SoundPlayer").play(a)}};e.exports=a}),null);
__d("MercuryCanonicalGroupThreadManager",["Bootloader","KeyedCallbackManager","MercuryIDs","MercuryPayloadSource","MercuryServerDispatcher","MercuryServerPayloadPreprocessor","MercurySingletonProvider","MessengerServerPayloadTransformer.bs","SubscriptionsHandler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){this.$1=a,this.$2=new(b("KeyedCallbackManager"))(),this.$3=b("MercuryServerPayloadPreprocessor").getForFBID(this.$1),this.$4={},this.$7(),this.$8(),this.$6={}}a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};var c=a.prototype;c.getCanonicalGroupThreadIDForParticipants=function(a,b){a=this.$9(a);var c=this.$10(a);c=this.$2.executeOrEnqueue(c,b);this.$11(a);return c};c.unsubscribe=function(a){a&&this.$2.unsubscribe(a)};c.$10=function(a){return a.sort().join(",")};c.$12=function(a,c){c=b("MercuryIDs").getThreadIDFromThreadFBID(c);this.$2.setResource(a,c);this.$4[c]=a};c.$11=function(a){var c=this.$10(a);c={canonical_group_key:c,participants:a};b("MercuryServerDispatcher").trySend("/ajax/mercury/search_canonical_groups.php",c,null,this.$1)};c.$7=function(){var a=this;b("MercuryServerDispatcher").registerEndpoints({"/ajax/mercury/search_canonical_groups.php":{request_user_id:this.$1,mode:b("MercuryServerDispatcher").IMMEDIATE,handler:function(b){a.handleUpdate(b)}}})};c.$9=function(a){a.indexOf(this.$1)===-1&&a.push(this.$1);return a};c.handleUpdate=function(a){if(a.graphql_payload){var c=b("MessengerServerPayloadTransformer.bs").transformThread(a.viewer,a.graphql_payload,a.for_page);this.$3.handleUpdate({threads:[c],payload_source:b("MercuryPayloadSource").SERVER_SEARCH})}c=a.canonical_group;if(c)for(var d in c)this.$12(d,c[d])};c.getNow=function(a){a=this.$10(this.$9(a));return this.$2.getResource(a)};c.$8=function(){var a=this;b("Bootloader").loadModules(["MercuryThreadInformer"],function(c){c=c.getForFBID(a.$1);var d=new(b("SubscriptionsHandler"))();d.addSubscriptions(c.subscribe("threads-deleted",function(b,c){for(var d in c)a.$4[d]&&(a.$2.setResource(a.$4[d],void 0),delete a.$4[d])}));a.$5=d},"MercuryCanonicalGroupThreadManager")};return a}();var g=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercuryNotificationRenderer",["fbt","CurrentUser","MercuryAssert","MercuryIDs","MercuryViewer","MessagingGenericAdminTextType","MessengerParticipants.bs","MessengerState.bs"],(function(a,b,c,d,e,f,g){__p&&__p();var h="source:messenger_growth:event_upcoming_bump";function a(a,c){__p&&__p();b("MercuryAssert").isThreadID(a),b("MessengerState.bs").getThreadMeta(b("CurrentUser").getID(),a,function(d){__p&&__p();b("MessengerState.bs").getThreadMessagesRange(b("CurrentUser").getID(),a,0,1,function(e){__p&&__p();e=e.length&&e[e.length-1];var f=[];e.tags!==void 0&&(f=f.concat(e.tags));e.log_message_data&&(e.log_message_data.message_type==b("MessagingGenericAdminTextType").CONFIRM_FRIEND_REQUEST||e.log_message_data.message_type==b("MessagingGenericAdminTextType").WORK_INVITE_CLAIMED)?c(g._("New contact added")):f.indexOf(h)!==-1?c(g._("You have an upcoming event.")):e&&e.author!=b("MercuryViewer").getID()?b("MessengerParticipants.bs").get(e.author,function(e){var f=e.short_name,h=d.custom_nickname;if(h){e=b("MercuryIDs").getUserIDFromParticipantID(e.id);h[e]&&(f=h[e])}d.name?c(g._("{senderName} messaged {groupName}",[g._param("senderName",f),g._param("groupName",d.name)])):b("MercuryIDs").isGroupChat(a)?c(g._("{name} messaged your group",[g._param("name",f)])):c(g._("{name} messaged you",[g._param("name",f)]))}):c(g._("New message"))})})}e.exports={renderDocumentTitle:a}}),null);
__d("MercurySyncEnvironment",["Arbiter","ChannelInitialData","CurrentUser","MercurySyncDeltaHandler","MessengerMQTTGating"],(function(a,b,c,d,e,f){"use strict";function a(){if(!b("ChannelInitialData").channelConfig&&!b("MessengerMQTTGating").isEnabled())return;b("MercurySyncDeltaHandler").get();b("Arbiter").inform("MercurySyncDeltaHandler/initSeqID",{fbid:b("CurrentUser").getAccountID(),seqID:b("ChannelInitialData").channelConfig?b("ChannelInitialData").channelConfig.sequenceId:0})}e.exports={setUp:a}}),null);
__d("P2PSendMoneyDialogStore",["EventEmitter","P2PActionConstants","P2PDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=36,h;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this)||this;h=new Map();b("P2PDispatcher").register(c.onEventDispatched.bind(babelHelpers.assertThisInitialized(c)));return c}var d=c.prototype;d.onEventDispatched=function(a){var c=a.data;a=a.type;switch(a){case b("P2PActionConstants").CHAT_SEND_VIEW_OPENED:this.handleChatSendViewOpened(c);this.emit("change");break;case b("P2PActionConstants").CHAT_SEND_VIEW_CLOSED:this.handleChatSendViewClosed(c);this.emit("change");break}};d.getStateByThreadID=function(a){return h.get(a)};d.handleChatSendViewOpened=function(a){h.set(a.threadID,{amount:a.amount,groupSendRecipientUserIDs:a.groupSendRecipientUserIDs,groupSendReceiptDetails:a.groupSendReceiptDetails,groupThreadFBID:a.groupThreadFBID,onCompletion:a.onCompletion,openRequestTab:a.openRequestTab,memoText:a.memoText&&a.memoText.substr(0,g),platformData:a.platformData,referrer:a.referrer,paymentRequestID:a.paymentRequestID,sendMoneyDialogShown:!0,sendMoneyNUXDismissed:a.sendMoneyNUXDismissed,useModal:a.useModal})};d.handleChatSendViewClosed=function(a){h.set(a.threadID,{amount:"",groupSendRecipientUserIDs:[],groupSendReceiptDetails:null,groupThreadFBID:"",onCompletion:null,openRequestTab:!1,memoText:null,platformData:null,referrer:null,paymentRequestID:null,sendMoneyDialogShown:!1,sendMoneyNUXDismissed:!1,useModal:!1})};d.isAnyChatSendViewOpen=function(){__p&&__p();for(var a=h.values(),b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;if(d.sendMoneyDialogShown)return!0}return!1};return c}(b("EventEmitter"));e.exports=new a()}),null);
__d("MercuryTypeaheadConstants",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({COMPOSER_FRIENDS_MAX:4,COMPOSER_FB4C_MAX:8,COMPOSER_NON_FRIENDS_MAX:2,COMPOSER_NON_FRIENDS_EXTRA_FETCH:3,COMPOSER_SHOW_MORE_LIMIT:2,COMPOSER_THREADS_INITIAL_LIMIT:2,COMPOSER_CHATTAB_MAX:5,COMPOSER_PAGES_MAX:5,COMPOSER_USERS_MAX:13,COMPOSER_WM_MAX:23,USER_TYPE:"user",PAGE_TYPE:"page",THREAD_TYPE:"thread",HEADER_TYPE:"header",SEARCH_TYPE:"search",FRIEND_TYPE:"friend",NON_FRIEND_TYPE:"non_friend",FB4C_TYPE:"fb4c",MEETING_ROOM_PAGE_TYPE:"meeting_room_page",COMMERCE_PAGE_TYPE:"commerce_page",INTERNAL_BOT_PAGE_TYPE:"internal_bot_page",GAME_TYPE:"game",MESSAGE_TYPE:"message",WORKPLACE_BOT_CATEGORY_TYPE:"WORKPLACE_BOT",VALID_EMAIL:"^([A-Z0-9._%+-]+@((?!facebook\\.com))[A-Z0-9.-]+\\.[A-Z]{2,4}|(([A-Z._%+-]+[A-Z0-9._%+-]*)|([A-Z0-9._%+-]+[A-Z._%+-]+[A-Z0-9._%+-]*))@(?:facebook\\.com))$"})}),null);
__d("MessengerRoomPrivacyMode",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({WHITELISTED_MODE:0,PUBLIC_MODE:1})}),null);